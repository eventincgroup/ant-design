{"version":3,"sources":["tooltip/index.jsx"],"names":["React","polyfill","RcTooltip","classNames","getPlacements","ConfigConsumer","splitObject","obj","keys","picked","omitted","forEach","key","getDisabledCompatibleChildren","element","elementType","type","__ANT_BUTTON","__ANT_SWITCH","__ANT_CHECKBOX","props","disabled","style","spanStyle","display","cursor","width","block","buttonStyle","pointerEvents","child","cloneElement","className","Tooltip","onVisibleChange","visible","setState","isNoTitle","saveTooltip","node","tooltip","onPopupAlign","domNode","align","placements","placement","Object","filter","points","rect","getBoundingClientRect","transformOrigin","top","left","indexOf","height","offset","renderTooltip","getContextPopupContainer","getPopupContainer","getPrefixCls","state","customizePrefixCls","prefixCls","title","overlay","openClassName","getTooltipContainer","children","isValidElement","childProps","childCls","defaultVisible","getPopupDomNode","builtinPlacements","arrowPointAtCenter","autoAdjustOverflow","verticalArrowShift","nextProps","Component","defaultProps","transitionName","mouseEnterDelay","mouseLeaveDelay"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { polyfill } from 'react-lifecycles-compat';\nimport RcTooltip from 'rc-tooltip';\nimport classNames from 'classnames';\nimport getPlacements from './placements';\nimport { ConfigConsumer } from '../config-provider';\nconst splitObject = (obj, keys) => {\n    const picked = {};\n    const omitted = Object.assign({}, obj);\n    keys.forEach(key => {\n        if (obj && key in obj) {\n            picked[key] = obj[key];\n            delete omitted[key];\n        }\n    });\n    return { picked, omitted };\n};\n// Fix Tooltip won't hide at disabled button\n// mouse events don't trigger at disabled button in Chrome\n// https://github.com/react-component/tooltip/issues/18\nfunction getDisabledCompatibleChildren(element) {\n    const elementType = element.type;\n    if ((elementType.__ANT_BUTTON ||\n        elementType.__ANT_SWITCH ||\n        elementType.__ANT_CHECKBOX ||\n        element.type === 'button') &&\n        element.props.disabled) {\n        // Pick some layout related style properties up to span\n        // Prevent layout bugs like https://github.com/ant-design/ant-design/issues/5254\n        const { picked, omitted } = splitObject(element.props.style, [\n            'position',\n            'left',\n            'right',\n            'top',\n            'bottom',\n            'float',\n            'display',\n            'zIndex',\n        ]);\n        const spanStyle = Object.assign(Object.assign({ display: 'inline-block' }, picked), { cursor: 'not-allowed', width: element.props.block ? '100%' : null });\n        const buttonStyle = Object.assign(Object.assign({}, omitted), { pointerEvents: 'none' });\n        const child = React.cloneElement(element, {\n            style: buttonStyle,\n            className: null,\n        });\n        return (<span style={spanStyle} className={element.props.className}>\n        {child}\n      </span>);\n    }\n    return element;\n}\nclass Tooltip extends React.Component {\n    constructor(props) {\n        super(props);\n        this.onVisibleChange = (visible) => {\n            const { onVisibleChange } = this.props;\n            if (!('visible' in this.props)) {\n                this.setState({ visible: this.isNoTitle() ? false : visible });\n            }\n            if (onVisibleChange && !this.isNoTitle()) {\n                onVisibleChange(visible);\n            }\n        };\n        this.saveTooltip = (node) => {\n            this.tooltip = node;\n        };\n        // 动态设置动画点\n        this.onPopupAlign = (domNode, align) => {\n            const placements = this.getPlacements();\n            // 当前返回的位置\n            const placement = Object.keys(placements).filter(key => placements[key].points[0] === align.points[0] &&\n                placements[key].points[1] === align.points[1])[0];\n            if (!placement) {\n                return;\n            }\n            // 根据当前坐标设置动画点\n            const rect = domNode.getBoundingClientRect();\n            const transformOrigin = {\n                top: '50%',\n                left: '50%',\n            };\n            if (placement.indexOf('top') >= 0 || placement.indexOf('Bottom') >= 0) {\n                transformOrigin.top = `${rect.height - align.offset[1]}px`;\n            }\n            else if (placement.indexOf('Top') >= 0 || placement.indexOf('bottom') >= 0) {\n                transformOrigin.top = `${-align.offset[1]}px`;\n            }\n            if (placement.indexOf('left') >= 0 || placement.indexOf('Right') >= 0) {\n                transformOrigin.left = `${rect.width - align.offset[0]}px`;\n            }\n            else if (placement.indexOf('right') >= 0 || placement.indexOf('Left') >= 0) {\n                transformOrigin.left = `${-align.offset[0]}px`;\n            }\n            domNode.style.transformOrigin = `${transformOrigin.left} ${transformOrigin.top}`;\n        };\n        this.renderTooltip = ({ getPopupContainer: getContextPopupContainer, getPrefixCls, }) => {\n            const { props, state } = this;\n            const { prefixCls: customizePrefixCls, title, overlay, openClassName, getPopupContainer, getTooltipContainer, } = props;\n            const children = props.children;\n            const prefixCls = getPrefixCls('tooltip', customizePrefixCls);\n            let { visible } = state;\n            // Hide tooltip when there is no title\n            if (!('visible' in props) && this.isNoTitle()) {\n                visible = false;\n            }\n            const child = getDisabledCompatibleChildren(React.isValidElement(children) ? children : <span>{children}</span>);\n            const childProps = child.props;\n            const childCls = classNames(childProps.className, {\n                [openClassName || `${prefixCls}-open`]: true,\n            });\n            return (<RcTooltip {...this.props} prefixCls={prefixCls} getTooltipContainer={getPopupContainer || getTooltipContainer || getContextPopupContainer} ref={this.saveTooltip} builtinPlacements={this.getPlacements()} overlay={overlay || title || ''} visible={visible} onVisibleChange={this.onVisibleChange} onPopupAlign={this.onPopupAlign}>\n        {visible ? React.cloneElement(child, { className: childCls }) : child}\n      </RcTooltip>);\n        };\n        this.state = {\n            visible: !!props.visible || !!props.defaultVisible,\n        };\n    }\n    static getDerivedStateFromProps(nextProps) {\n        if ('visible' in nextProps) {\n            return { visible: nextProps.visible };\n        }\n        return null;\n    }\n    getPopupDomNode() {\n        return this.tooltip.getPopupDomNode();\n    }\n    getPlacements() {\n        const { builtinPlacements, arrowPointAtCenter, autoAdjustOverflow } = this.props;\n        return (builtinPlacements ||\n            getPlacements({\n                arrowPointAtCenter,\n                verticalArrowShift: 8,\n                autoAdjustOverflow,\n            }));\n    }\n    isNoTitle() {\n        const { title, overlay } = this.props;\n        return !title && !overlay; // overlay for old version compatibility\n    }\n    render() {\n        return <ConfigConsumer>{this.renderTooltip}</ConfigConsumer>;\n    }\n}\nTooltip.defaultProps = {\n    placement: 'top',\n    transitionName: 'zoom-big-fast',\n    mouseEnterDelay: 0.1,\n    mouseLeaveDelay: 0.1,\n    arrowPointAtCenter: false,\n    autoAdjustOverflow: true,\n};\npolyfill(Tooltip);\nexport default Tooltip;\n"],"file":"index.js"}